!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.devtools=t()}(this,function(){"use strict";var t={runs:{},logs:[],paneShown:!1,selectedAction:null,collapseRepeatingActions:!0,showFullState:!0},u=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n};function a(n,t){t="string"==typeof t?t.split("."):t;for(var e=n,o=0;o<t.length;o++)e=e?e[t[o]]:e;return e}function c(n,t,e){return 0===(t="string"==typeof t?t.split("."):t).length?e:l(Array.isArray(n)?[]:{},n,((o={})[t[0]]=1<t.length?c(n[t[0]]||{},t.slice(1),e):e,o));var o}function l(n,t,e){for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}function s(n,t){if(t&&t.result){var e=t.action.split(".");return e.pop(),o=n,r=e,i=t.result,c(o,r,l(Array.isArray(i)?[]:{},a(o,r),i))}var o,r,i;return n}var e={log:function(t){return function(n){return{logs:n.logs.concat([t])}}},logInit:function(o){return function(n){var t=u({},n.runs),e={name:"Initial State",done:!0,collapsed:!1,nestedActions:[],previousState:null,nextState:o.state};return t[o.runId]={id:o.runId,timestamp:o.timestamp,actions:[e],collapsed:!1},{runs:t,selectedAction:e}}},logAction:function(a){return function(n){var t,e=u({},n.runs),o=e[a.runId],r=o.actions.slice(),i=(o.actions=r).pop();return i.done?a.callDone?console.log("Previous action is done and event.callDone",n,a):(t={done:!1,collapsed:!1,nestedActions:[],name:a.action,actionData:a.data,previousState:i.nextState},r.push(i,t)):(t=function n(t,e){if(t.done)return t;if(0===t.nestedActions.length){if(e.callDone)return t.name===e.action?u({},t,{done:!0,actionResult:e.result,nextState:s(t.previousState,e)}):(console.log("Previous action is done and event.callDone",t,e),t);var o={name:e.action,done:!1,collapsed:!1,actionData:e.data,nestedActions:[],previousState:t.previousState};return u({},t,{nestedActions:[o]})}var r=t.nestedActions,i=n(o=r[r.length-1],e);return o===i?t:u({},t,{nestedActions:r.slice(0,r.length-1).concat(i)})}(i,a),r.push(t)),{runs:e,selectedAction:t}}},toggleRun:function(e){return function(n){var t=u({},n.runs);return t[e]=u({},t[e],{collapsed:!t[e].collapsed}),{runs:t}}},toggleAction:function(o){return function(n){var t=[o.run,"actions",o.actionId,"collapsed"],e=a(n.runs,t);return{runs:c(n.runs,t,!e)}}},select:function(n){return{selectedAction:n}},showPane:function(n){return{paneShown:n}},toggleCollapseRepeatingActions:function(){return function(n){return{collapseRepeatingActions:!n.collapseRepeatingActions}}},toggleShowFullState:function(){return function(n){return{showFullState:!n.showFullState}}},deleteRun:function(e){return function(n){var t=u({},n.runs);return delete t[e],{runs:t}}}};function o(n,t){for(var e=[],o=[],r=arguments.length;2<r--;)e.push(arguments[r]);for(;e.length;){var i=e.pop();if(i&&i.pop)for(r=i.length;r--;)e.push(i[r]);else null!=i&&!0!==i&&!1!==i&&o.push(i)}return"function"==typeof n?n(t||{},o):{nodeName:n,attributes:t||{},children:o,key:t&&t.key}}var r={width:"100%",height:"1.3rem","padding-top":"0.15rem","padding-left":"0.15rem","border-bottom":"1px solid black"};var i={width:"96%",height:"96%",background:"#EEEEEE",border:"1px solid black",color:"black",position:"fixed",left:"2%",top:"2%",valign:"center"};function d(n){var t=n.state,e=(n.actions,n.style);return o("div",{style:void 0===e?i:e,class:"debug-pane"},o("div",{style:r},"toolbar"),o("pre",null,JSON.stringify(t,null,2)))}var f={position:"fixed",right:"2%",bottom:"2%","border-radius":"0px",border:"1px solid black",color:"black",background:"white",margin:"0.2rem",outline:"none","font-size":"2rem"};function p(n){var t=n.state,e=n.actions;return o("button",{style:f,onclick:function(){return e.showPane(!t.paneShown)}},"Devtools")}var v={position:"fixed",top:0,left:0,height:"100vh",width:"100vw","z-index":10};function g(n,t){return n.paneShown?o("div",{style:v},d({state:n,actions:t}),p({state:n,actions:t})):p({state:n,actions:t})}var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",h=function(){return n[Math.floor(Math.random()*n.length)]},m=function(){return Array.apply(null,Array(16)).map(h).join("")};return function(i){var n=document.createElement("div");n.id="hyperapp-devtools",document.body.appendChild(n);var a=i(t,e,g,n);return function(n,t,e,o){var r=m();return(t=function e(a,u,o,n){var c=n?n+".":"";return Object.keys(o||{}).reduce(function(n,t){var r=c+t,i=o[t];return n[t]="function"==typeof i?function(o){return function(n,t){a({callDone:!1,action:r,data:o,runId:u});var e=i(o);return e="function"==typeof e?e(n,t):e,a({callDone:!0,action:r,data:o,result:e,runId:u}),e}}:e(a,u,i,r),n},{})}(a.logAction,r,t)).$__SET_STATE=function(n){return n},a.logInit({runId:r,state:n,timestamp:(new Date).getTime()}),i(n,t,e,o)}}});
//# sourceMappingURL=hyperapp-devtools.min.js.map
